---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "bloxone_dhcp_ha_group Resource - terraform-provider-bloxone"
subcategory: "IPAM/DHCP"
description: |-
  Manages an HA Group.
  The HA Group object represents on-prem hosts that can serve the same leases for HA.
---

# bloxone_dhcp_ha_group (Resource)

Manages an HA Group.

The HA Group object represents on-prem hosts that can serve the same leases for HA.

## Example Usage

```terraform
# Get first host for the HA group.
data "bloxone_dhcp_hosts" "example_host_1" {
  filters = {
    name = "Host-1"
  }
}

# Get second host for the HA group.
data "bloxone_dhcp_hosts" "example_host_2" {
  filters = {
    name = "Host-2"
  }
}

resource "bloxone_dhcp_ha_group" "example_tags" {
  name = "example_ha_group_tags"
  mode = "active-active"
  hosts = [
    {
      host = data.bloxone_dhcp_hosts.example_host_1.results.0.id,
      role = "active"
    },
    {
      host = data.bloxone_dhcp_hosts.example_host_2.results.0.id,
      role = "active"
    }
  ]

  # Optional fields
  comment = "Example HA Group with tags created by the terraform provider"
  tags = {
    location = "site1"
  }
}
```

## Example Usage For Ancyast

```terraform
# Get first host for the HA group.
# This host must have 'Anycast' enabled.
data "bloxone_dhcp_hosts" "example_host_1" {
  filters = {
    name = "Host-1"
  }
}

# Get second host for the HA group.
# This host must have 'Anycast' enabled.
data "bloxone_dhcp_hosts" "example_host_2" {
  filters = {
    name = "Host-2"
  }
}

# Get the Anycast configuration for the service
data "bloxone_anycast_configs" "example_service" {
  service = "DHCP"
}

resource "bloxone_dhcp_ha_group" "example_anycast" {
  name              = "example_ha_group_anycast"
  mode              = "anycast"
  anycast_config_id = format("accm/ac_configs/%s", data.bloxone_anycast_configs.example_service.results.0.id)

  hosts = [
    {
      host = data.bloxone_dhcp_hosts.example_host_1.results.0.id,
      role = "active"
    },
    {
      host = data.bloxone_dhcp_hosts.example_host_2.results.0.id,
      role = "passive"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `hosts` (Attributes List) The list of hosts. (see [below for nested schema](#nestedatt--hosts))
- `mode` (String) The mode of the HA group. Valid values are:
  * _active-active_: Both on-prem hosts remain active.
  * _active-passive_: One on-prem host remains active and one remains passive. When the active on-prem host is down, the passive on-prem host takes over.
  * _advanced-active-passive_: One on-prem host may be part of multiple HA groups. When the active on-prem host is down, the passive on-prem host takes over.
- `name` (String) The name of the HA group. Must contain 1 to 256 characters. Can include UTF-8.

### Optional

- `anycast_config_id` (String) The resource identifier.
- `collect_stats` (Boolean) collect_stats gets the HA group stats(state, status, heartbeat) if set to true. Defaults to false
- `comment` (String) The description for the HA group. May contain 0 to 1024 characters. Can include UTF-8.
- `tags` (Map of String) The tags for the HA group.

### Read-Only

- `created_at` (String) Time when the object has been created.
- `id` (String) The resource identifier.
- `ip_space` (String) The resource identifier.
- `status` (String) Status of the HA group. This field is set when the _collect_stats_ is set to _true_ in the _GET_ _/dhcp/ha_group_ request.
- `status_v6` (String) Status of the DHCPv6 HA group. This field is set when the _collect_stats_ is set to _true_ in the _GET_ _/dhcp/ha_group_ request.
- `tags_all` (Map of String) The tags for the HA group including default tags.
- `updated_at` (String) Time when the object has been updated. Equals to _created_at_ if not updated after creation.

<a id="nestedatt--hosts"></a>
### Nested Schema for `hosts`

Required:

- `host` (String) The resource identifier.
- `role` (String) The role of this host in the HA relationship: _active_ or _passive_.

Optional:

- `address` (String) The address on which this host listens.

Read-Only:

- `heartbeats` (Attributes List) Last successful heartbeat received from its peer/s. This field is set when the _collect_stats_ is set to _true_ in the _GET_ _/dhcp/ha_group_ request. (see [below for nested schema](#nestedatt--hosts--heartbeats))
- `port` (Number) The HA port.
- `port_v6` (Number) The HA port used for IPv6 communication.
- `state` (String) The state of DHCP on the host. This field is set when the _collect_stats_ is set to _true_ in the _GET_ _/dhcp/ha_group_ request.
- `state_v6` (String) The state of DHCPv6 on the host. This field is set when the _collect_stats_ is set to _true_ in the _GET_ _/dhcp/ha_group_ request.

<a id="nestedatt--hosts--heartbeats"></a>
### Nested Schema for `hosts.heartbeats`

Read-Only:

- `peer` (String) The name of the peer.
- `successful_heartbeat` (String) The timestamp as a string of the last successful heartbeat received from the peer above.
- `successful_heartbeat_v6` (String) The timestamp as a string of the last successful DHCPv6 heartbeat received from the peer above.
